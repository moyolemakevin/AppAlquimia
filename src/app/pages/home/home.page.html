<ion-page>
  <ion-header>
    <ion-toolbar color="primary">
      <ion-title>Inicio</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content fullscreen>
    <section class="hero" *ngIf="user() as currentUser">
      <h2>{{ greeting() }}</h2>
      <p>Descubre los beneficios de los aceites esenciales y deja que la IA te guie en tu camino de bienestar.</p>
      <ion-button color="secondary" (click)="openAssistant()">
        <ion-icon slot="start" name="chatbubble-ellipses-outline"></ion-icon>
        Abrir chat
      </ion-button>
    </section>

    <section class="quick-prompts">
      <h3>Preguntas rapidas al asistente</h3>
      <ion-chip *ngFor="let prompt of quickPrompts" (click)="openAssistant(prompt.query)">
        <ion-icon [name]="prompt.icon"></ion-icon>
        <ion-label>{{ prompt.label }}</ion-label>
      </ion-chip>
    </section>

    <section class="shortcuts">
      <h3>Atajos</h3>
      <ion-grid>
        <ion-row>
          <ion-col size="6" sizeMd="4" *ngFor="let shortcut of shortcuts">
            <ion-card class="shortcut-card" (click)="navigateTo(shortcut.route)">
              <ion-card-content>
                <ion-icon [name]="shortcut.icon"></ion-icon>
                <ion-card-title>{{ shortcut.label }}</ion-card-title>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </section>

    <section class="highlighted">
      <div class="section-header">
        <h3>Aceites destacados</h3>
        <ion-button fill="clear" size="small" (click)="navigateTo('/app/aceites')">Ver todo</ion-button>
      </div>

      <ng-container *ngIf="highlightedAceites().length; else emptyAceites">
        <ion-card *ngFor="let aceite of highlightedAceites()">
          <ion-card-header>
            <ion-card-title>{{ aceite.nombre }}</ion-card-title>
            <ion-card-subtitle>{{ aceite.beneficios }}</ion-card-subtitle>
          </ion-card-header>
          <ion-card-content>
            <p>{{ aceite.descripcion }}</p>
            <ion-button fill="clear" size="small" (click)="navigateTo('/app/aceites')">
              Ver mas
            </ion-button>
          </ion-card-content>
        </ion-card>
      </ng-container>

      <ng-template #emptyAceites>
        <ion-text color="medium" *ngIf="!isLoadingAceites(); else loadingAceites">
          No hay aceites registrados en este momento.
        </ion-text>
      </ng-template>
      <ng-template #loadingAceites>
        <ion-text color="medium">Cargando aceites destacados...</ion-text>
      </ng-template>
    </section>
  </ion-content>
