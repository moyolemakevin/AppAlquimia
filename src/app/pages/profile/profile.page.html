<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Mi perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="app-shell profile-page">
  <section class="surface-section profile-hero" *ngIf="profile() as user">
    <div class="profile-header">
      <div class="profile-avatar">
        <span>{{ initials }}</span>
      </div>
      <div class="profile-details">
        <h1>{{ user.name || user.username }}</h1>
        <p>{{ user.email }}</p>
        <div class="profile-tags">
          <ion-chip color="light">
            <ion-icon name="shield-checkmark-outline"></ion-icon>
            <ion-label>{{ roleLabel }}</ion-label>
          </ion-chip>
          <ion-chip color="secondary">
            <ion-icon name="sparkles-outline"></ion-icon>
            <ion-label>{{ user.level || 'Novato' }}</ion-label>
          </ion-chip>
        </div>
      </div>
    </div>
    <div class="profile-meta">
      <div>
        <span class="meta-title">Telefono</span>
        <span class="meta-value">{{ user.phone || 'No registrado' }}</span>
      </div>
      <div>
        <span class="meta-title">Miembro desde</span>
        <span class="meta-value">{{ memberSince }}</span>
      </div>
      <div>
        <span class="meta-title">Ultimo acceso</span>
        <span class="meta-value">{{ lastAccess }}</span>
      </div>
    </div>
    <div class="profile-actions">
      <ion-button color="primary" (click)="editProfile()">
        Editar perfil
      </ion-button>
    </div>
  </section>

  <section class="surface-section profile-stats" *ngIf="stats() as data">
    <div class="section-header">
      <h3>Actividad reciente</h3>
    </div>
    <div class="stats-grid">
      <div class="stat-card">
        <span class="stat-label">Aceites explorados</span>
        <span class="stat-value">{{ data.total_aceites_explorados || 0 }}</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Favoritos</span>
        <span class="stat-value">{{ data.favoritos_total || 0 }}</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Tips recibidos</span>
        <span class="stat-value">{{ data.tips_recibidos || 0 }}</span>
      </div>
    </div>
  </section>

  <ion-text color="medium" *ngIf="!profile() && !isLoading()" class="profile-empty">
    No pudimos cargar tu informacion de perfil.
  </ion-text>
</ion-content>
